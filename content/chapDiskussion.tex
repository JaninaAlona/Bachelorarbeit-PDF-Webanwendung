\chapter{Diskussion und Kritik}
Es gibt einige Kritikpunkte in meiner PDF Web App, die zur weiteren Diskussion anregen. Einige wichtige Funktionalitäten sind noch nicht implementiert und ich plane diese noch in die PDF Web App in den nächsten Releases einzubauen. In meiner PDF Web App fehlt die Spiegelung von Text, Zeichnungen, Geometrie und Bildern als wichtige affine Transformation. Die anderen Transformationen Verschiebung, Skalierung und Rotation sind bereits in der PDF Web App vorhanden. Außerdem fehlt die Searchable PDF-Eigenschaft im Reader, d.h. der Benutzer kann keinen Text oder Bilder kopieren. Am besten benutze ich für diese Eigenschaft eine \gls{ocr}-JavaScript Library, die jedes PDF in Searchable PDFs umwandeln kann. Falls der Browser oder Computer abstürzt und das in der PDF Web App geöffnete Dokument nicht gedownloaded wurde, sind die Daten verloren. Als Gegenmaßnahme könnte man einen Export und Import Button konfigurieren, der die hinzugefügten PDF-Objekte als \gls{json}-Datei speichert. Bei Export würde diese Datei angelegt und im Ordner der PDF Web App gespeichert werden und mittels Import könnte man die PDF-Objekte dem geöffneten Dokument hinzufügen, sodass sie weiter bearbeitet werden können. Zusätzlich könnte man einen automatischen Export der PDF-Objekte als Backup implementieren, der z.B. alle 10 Minuten die hinzugefügten Elemente wie Text, Zeichnungen, Geometrie und Bilder in der \gls{json}-Datei sichert. \\
Bei sehr vielen Seiten dauert es mehrere Sekunden bis alle Canvaselemente für die PDF Seiten erstellt worden sind und das PDF angezeigt wird. Eventuell sollte ich noch ein inkrementelles Laden der PDF Seiten implementieren, d.h. das geladene Seiten bereits angezeigt werden, bevor das komplette PDF geladen wurde. Beizeiten kommt es vor, dass es länger dauert bis sich die Seite der PDF Web App aufbaut. Vermutlich liegt das an der Auslastung des Browser Caches. Wenn man den Browser Cache leert, baut die Seite sich meistens wieder ohne merkliche Zeitverzögerungen auf. Eine wichtige Vorgabe habe ich nicht umgesetzt. Ich hatte zuerst einen Print Button im Reader implementiert. Als ich dann später das Drehen von Seiten programmiert habe, hat die Druckfunktionalität zu viele Probleme bereitet, vor allem, dass sie in einem neuen Tab geöffnet werden sollte. Das Problem liegt hauptsächlich an der same-origin policy in Browsern. Die same-orgin policy blockiert den Lesezugriff von Ressourcen, die von einer anderen Herkunft geladen werden. Diese Sicherheitsfunktionalität regelt wie Dokumente und Scripte von einer Herkunft mit Ressourcen anderen Ursprungs interagieren \cite{same-origin}. Ein weitere Kritikpunkt ist, dass die Move-Operation von Elementen nicht optimal funktioniert. Man verliert die control box, wenn man zu schnell die Maus bewegt. Außerdem kann es vorkommen, dass man klickt und dann das Element etwas weiter weg springt. Man verliert die Maus, weil das mousemove Event schneller ausgelöst wird als der Browser Frames rendern kann. \cite{lawson} Eine Funktionalität, die ich oft benötige, ist die Kompression von PDF-Dokumenten. Von Anfang an wollte ich gerne eine Funktion dafür bieten, jedoch hatte ich keine geeignete JavaScript Library für Kompression gefunden. Ich habe darauf verzichtet die Kompression selbst zu implementieren. \\
Es gibt einige Optimierungsmöglichkeiten von bestehenden Funktionalitäten. Im Merger kann man jeweils nur einen Listeneintrag von ausgewählten PDFs, die zusammengefügt werden sollen, auswählen. Da könnte man programmieren, dass man mehrere Dateien auf einmal auswählen kann, um sie dann aus der Liste zu entfernen. Genauso wäre es sinnvoll im Dateibrowser mehrere PDF-Dateien selektieren zu können. Beim Radieren von Zeichnungen im Draw Editor könnte man die Ebene, wo die Zeichnung komplett weg radiert wurde automatisch entfernen. Zur Zeit ist es in meiner PDF Web App so, dass der Benutzer die leere Ebene manuell löschen muss. Das automatische Entfernen von leeren Ebenen hat Vor- und Nachteile. Eventuell würde es den intuitiven Arbeitsfluss des Nutzers beim Zeichnen stören, falls die Ebene automatisch entfernt würde. Ebenfalls hat die aktuelle Verwendung von absoluten Rotationen von Elementen Vor- und Nachteile. Relative Rotationen könnten ein intuitives Arbeiten ermöglichen und würden Kopfrechenschritte sparen. Jedoch haben absolute Rotationen den Vorteil, dass die Rotation immer gleich ist und somit besser nachvollziehbar für den Benutzer ist. Insgesamt ist die leichte Bedienbarkeit der PDF Web App zumindest im Editor nicht ganz gelungen. Für das Verständnis von Box Mode und Layer Mode, sowie deren Vorzüge, muss man die Tutorials gelesen haben. Die Buttons sind außer Spin CW (clockwise) und Spin CCW (counterclockwise) aussagekräftig beschriftet, denke ich. \\
Ein großer Pluspunkt der PDF Web App ist, dass sie nicht installiert werden muss. Das bedeutet auch, dass keine Deinstallationsdateien übrig bleiben. Gerne hätte ich eine Tablet Version implementiert, um das Zeichnen zu erleichtern. Nichtsdestotrotz funktioniert das Zeichnen mit einem Graphic Tablet ohne Probleme. Ich unterstütze keine Verschlüsselung von PDF-Dokumenten, da PDF-Dateien unsicher sind und nicht für vertraulichen Inhalt verwendet werden sollten. In Zukunft könnte ich versuchen, eine sichere Verschlüsselung zu implementieren, was eher mehr Zeit in Anspruch nehmen wird.

\section{Erweiterungsmöglichkeiten der PDF Web App}



\section{Erfahrungen bei der Programmierung der Tablet Version}
Gerne hätte ich die PDF Web App auch für das Tablet auf Android und iOS zum Laufen gebracht. Das GUI Layout der PDF Web App ist für eine Tablet Version tauglich und optimiert programmiert worden. Jedoch habe ich viele Probleme bei der Implementierung feststellen können. Zunächst habe ich herausgefunden, dass man auf Android und iOS Browsern keine lokalen HTML-Dateien ausführen kann. Folglich musste ich einen lokalen Webserver starten, um per localhost:<port> die Webseite im Firefox Browser des Tablets aufrufen zu können. Zu der Zeit hatte ich noch nicht gewusst, dass man die PDF Web App mit Github pages kostenlos als Webseite betreiben kann. Auf Android hatte ich damals die kostenlose Play Store App Simple HTTP Server gefunden. Auf dem iPad habe ich die App mit der iOS App Codesandbox und Documents zum laufen gebracht. Im Folgenden sind die Links zu diesen Apps aufgeführt:

\url{https://play.google.com/store/apps/details?id=com.phlox.simpleserver&hl=de&pli=1} \\
\url{https://codesandbox.io/codesandbox-for-ios} \\
\url{https://apps.apple.com/us/app/documents-file-manager-vpn/id364901807}

Später hatte ich sogar einen kleinen eigenen Webserver in Node JS Express geschrieben, den ich dann zum öffentlichen Github Repository der PDF Web App gepusht habe. \\
Die Mouse Events mousedown, mousemove, mouseup und alle drag Events werden nicht ausgeführt auf der Tablet Version. Folglich funktionierte das Zeichnen, Radieren, Bewegen von Elementen, Verschieben von Ebenen und Listeneinträgen im Merger nicht. Auf Stackoverflow hatte ich dann eine Lösung dafür gefunden: Ich muss mousedown mit touchstart, mousemove mit touchmove und moouseup mit dem touchend Event ersetzten. Das allein reihte nicht. Zusätzlich musste ich event.clientX und event.clientY wie folgt im Codebeispiel ersetzten:

\begin{lstlisting}[caption=e.clientX und e.clientY Ersetzung]
	const clientXReplace = (e.targetTouches[0] ? e.targetTouches[0].pageX : e.changedTouches[e.changedTouches.length-1].pageX);
	const clientYReplace = (e.targetTouches[0] ? e.targetTouches[0].pageY : e.changedTouches[e.changedTouches.length-1].pageY);
\end{lstlisting} 

Diese Lösung hat jedoch nicht für drag Events funktioniert, d.h. das Verschieben von Ebenen im Editor und Listenelemente im Merger hat mit der Maus nicht funktioniert. Daher habe ich die dragdroptouch JavaScript Library eingebaut. Sie ist auf der folgenden Webseite zu finden:

\url{https://github.com/Bernardo-Castilho/dragdroptouch}

Mit dieser Library haben zwar die drag Events funktioniert, jedoch nicht mehr die touch Events. Die touch Events wurden auch überschrieben. Eine Lösung habe ich bisher nicht gefunden. Möglicherweise wäre folgende jQuery Library UI Touch Punch zielführend:

\url{https://github.com/furf/jquery-ui-touch-punch}

Jedoch habe ich diese Library noch nicht ausprobiert, da ich mich dann gegen eine Tablet Version der PDF Web App entschieden hatte.

